{"ast":null,"code":"import _asyncToGenerator from \"/Users/leolanese/dev2/my-angular-storybook-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { global } from '@storybook/global';\nimport { addons } from '@storybook/preview-api';\nvar ADDON_ID = \"storybook/a11y\";\nvar RESULT = `${ADDON_ID}/result`,\n  REQUEST = `${ADDON_ID}/request`,\n  RUNNING = `${ADDON_ID}/running`,\n  ERROR = `${ADDON_ID}/error`,\n  MANUAL = `${ADDON_ID}/manual`,\n  EVENTS = {\n    RESULT,\n    REQUEST,\n    RUNNING,\n    ERROR,\n    MANUAL\n  };\nvar {\n    document,\n    window: globalWindow\n  } = global,\n  channel = addons.getChannel(),\n  active = !1,\n  activeStoryId,\n  handleRequest = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (storyId) {\n      let {\n        manual\n      } = yield getParams(storyId);\n      manual || (yield run(storyId));\n    });\n    return function handleRequest(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(),\n  run = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (storyId) {\n      activeStoryId = storyId;\n      try {\n        let input = yield getParams(storyId);\n        if (!active) {\n          active = !0, channel.emit(EVENTS.RUNNING);\n          let axe = (yield import('axe-core')).default,\n            {\n              element = \"#storybook-root\",\n              config,\n              options = {}\n            } = input,\n            htmlElement = document.querySelector(element);\n          if (!htmlElement) return;\n          axe.reset(), config && axe.configure(config);\n          let result = yield axe.run(htmlElement, options),\n            resultJson = JSON.parse(JSON.stringify(result));\n          activeStoryId === storyId ? channel.emit(EVENTS.RESULT, resultJson) : (active = !1, run(activeStoryId));\n        }\n      } catch (error) {\n        channel.emit(EVENTS.ERROR, error);\n      } finally {\n        active = !1;\n      }\n    });\n    return function run(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(),\n  getParams = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(function* (storyId) {\n      let {\n        parameters\n      } = (yield globalWindow.__STORYBOOK_STORY_STORE__.loadStory({\n        storyId\n      })) || {};\n      return parameters.a11y || {\n        config: {},\n        options: {}\n      };\n    });\n    return function getParams(_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\nchannel.on(EVENTS.REQUEST, handleRequest);\nchannel.on(EVENTS.MANUAL, run);","map":{"version":3,"names":["global","addons","ADDON_ID","RESULT","REQUEST","RUNNING","ERROR","MANUAL","EVENTS","document","window","globalWindow","channel","getChannel","active","activeStoryId","handleRequest","_ref","_asyncToGenerator","storyId","manual","getParams","run","_x","apply","arguments","_ref2","input","emit","axe","default","element","config","options","htmlElement","querySelector","reset","configure","result","resultJson","JSON","parse","stringify","error","_x2","_ref3","parameters","__STORYBOOK_STORY_STORE__","loadStory","a11y","_x3","on"],"sources":["/Users/leolanese/dev2/my-angular-storybook-project/node_modules/@storybook/addon-a11y/dist/preview.js"],"sourcesContent":["import { global } from '@storybook/global';\nimport { addons } from '@storybook/preview-api';\n\nvar ADDON_ID=\"storybook/a11y\";var RESULT=`${ADDON_ID}/result`,REQUEST=`${ADDON_ID}/request`,RUNNING=`${ADDON_ID}/running`,ERROR=`${ADDON_ID}/error`,MANUAL=`${ADDON_ID}/manual`,EVENTS={RESULT,REQUEST,RUNNING,ERROR,MANUAL};var{document,window:globalWindow}=global,channel=addons.getChannel(),active=!1,activeStoryId,handleRequest=async storyId=>{let{manual}=await getParams(storyId);manual||await run(storyId);},run=async storyId=>{activeStoryId=storyId;try{let input=await getParams(storyId);if(!active){active=!0,channel.emit(EVENTS.RUNNING);let axe=(await import('axe-core')).default,{element=\"#storybook-root\",config,options={}}=input,htmlElement=document.querySelector(element);if(!htmlElement)return;axe.reset(),config&&axe.configure(config);let result=await axe.run(htmlElement,options),resultJson=JSON.parse(JSON.stringify(result));activeStoryId===storyId?channel.emit(EVENTS.RESULT,resultJson):(active=!1,run(activeStoryId));}}catch(error){channel.emit(EVENTS.ERROR,error);}finally{active=!1;}},getParams=async storyId=>{let{parameters}=await globalWindow.__STORYBOOK_STORY_STORE__.loadStory({storyId})||{};return parameters.a11y||{config:{},options:{}}};channel.on(EVENTS.REQUEST,handleRequest);channel.on(EVENTS.MANUAL,run);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}